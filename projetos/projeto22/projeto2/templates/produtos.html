{% extends "base.html" %}
{% block title %}Produtos - Minha Loja{% endblock %}
{% block content %}
  <div class="page-head">
    <h2>Produtos</h2>
    <div>
      <a class="btn" href="{{ url_for('create_product') }}">Novo Produto</a>
    </div>
  </div>

  {% if products %}
    <div class="table-wrap">
      <table class="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Preço (R$)</th>
            <th>Descrição</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          {% for p in products %}
          <tr>
            <td>{{ p.id }}</td>
            <td>{{ p.nome }}</td>
            <td>{{ "%.2f"|format(p.preco) }}</td>
            <td class="desc-cell">{{ p.descricao }}</td>
            <td class="actions">
              <a class="btn small" href="{{ url_for('edit_product', product_id=p.id) }}">Editar</a>
              <form action="{{ url_for('delete_product', product_id=p.id) }}" method="post" class="inline-form" onsubmit="return confirm('Confirma exclusão do produto?');">
                <!-- se usar flask-wtf: inclua token CSRF -->
                <button class="btn small danger" type="submit">Excluir</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="muted">Nenhum produto cadastrado. <a href="{{ url_for('create_product') }}">Criar primeiro produto</a>.</p>
  {% endif %}
{% endblock %}
