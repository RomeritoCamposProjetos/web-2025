---
marp: true
theme: psi
footer: '[Programa√ß√£o de Sistemas para Internet - Prof. Romerito Campos - 2025](https://rocampos.github.io/)'
_class: lead
size: 16:9
---

# Templates no Flask


---

## Templates no Flask

- Usando Jinja2 para separar l√≥gica da apresenta√ß√£o  
- Exemplos com p√°ginas de login e cadastro de usu√°rios

---

## Templates no Flask

- O que s√£o templates?
- Templates simples com `render_template`
- Heran√ßa de templates
- Blocos (`block`, `endblock`)
- Componentes com `include`
- Exemplo: Login e Cadastro com HTML + CSS

---

## Templates no Flask

Flask usa [Jinja2](https://jinja.palletsprojects.com/en/stable/) como engine de templates.

```python
from flask import Flask, render_template

app = Flask(__name__)

@app.route("/")
def home():
    return render_template("index.html")
```

- No [Exemplo 01](https://github.com/RomeritoCamposProjetos/web-2025/tree/main/slides/07/exemplo1), os conceitos fundamentais de templates s√£o apresenados.

- Consulte a documenta√ß√£o do [Jinja](https://jinja.palletsprojects.com/en/stable/) para aprofundar os conhecimentos de outras diretivas √∫teis para cria√ß√£o de p√°ginas.

---

# Heran√ßa de Templates

---

## üß† O que √© heran√ßa de templates?

- Heran√ßa de templates √© um recurso do **Jinja2** (a engine de templates usada pelo Flask) que permite **evitar duplica√ß√£o de c√≥digo HTML** ao reutilizar uma estrutura base comum em v√°rias p√°ginas.

- Ela funciona como um "molde":
    - Um **template base** define a estrutura comum (HTML, cabe√ßalho, CSS, etc.)
    - Os outros templates **herdam** essa estrutura e **preenchem blocos espec√≠ficos**

---

## üéØ Quando usar heran√ßa?

- Sempre que voc√™ tiver v√°rias p√°ginas com **layout semelhante** (ex: mesmas cores, mesma navbar, mesmo rodap√©), mas **conte√∫dos diferentes**, como:
    - login.html
    - register.html
    - dashboard.html
    - perfil.html

---

### üìÑ Template Base (base.html)

```html
<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Minha Aplica√ß√£o{% endblock %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <header>
    <h1>Minha Aplica√ß√£o</h1>
  </header>
  <main class="container">
    {% block content %}{% endblock %}
  </main>
  <footer>
    <p>&copy; 2025 - Todos os direitos reservados</p>
  </footer>
</body>
</html>
```

---

### O que s√£o os `block`?

- S√£o **marcadores de substitui√ß√£o**.
- Quem **herda** esse template pode **preencher ou sobrescrever** esses blocos.
- Por exemplo, no slide anterior foram definidos os seguintes blocos de substitui√ß√£o:
    - `title`
    - `content`
- A seguir dois exemplos s√£o apresentados: `login.html` e `regsiter.html`
    - Ambos utilizam como layout o conte√∫do que est√° no arquivo `base.html`
    - Em cada arquivo HTML, os formul√°rios de login e cadastro s√£o personalizados para atender aos requisitos das respectivas opera√ß√µes.

---

### O que s√£o os `block`?

#### Regras Importantes

- O nome do bloco no filho deve ser igual ao do base:
Ex: block content substitui o block content da base.
- Voc√™ pode deixar conte√∫do padr√£o no bloco base:
Se o filho n√£o sobrescrever, o conte√∫do padr√£o ser√° usado.
- Voc√™ pode ter quantos blocos quiser
Ex: navbar, sidebar, scripts, etc.

<p class="nota">
Os blocos s√£o fundamentais para composi√ß√£o de p√°ginas durante a heran√ßa de templates.
<p>

---

### üìÑ Template filho: login.html

```html
{% extends "base.html" %}
{% block title %}Login{% endblock %}
{% block content %}
<h2>Login</h2>
<form method="POST" action="/login">
  <input type="text" name="username" placeholder="Usu√°rio">
  <input type="password" name="password" placeholder="Senha">
  <button type="submit">Entrar</button>
</form>
{% endblock %}
```
- `{% extends "base.html" %}` ‚Üí diz que este arquivo **herda** de `base.html`
- `block title` ‚Üí define o t√≠tulo da aba do navegador
- `block content` ‚Üí insere conte√∫do espec√≠fico da p√°gina

---

### üìÑ Template filho: login.html

- A p√°gina `login.html` herda toda a estrutura de `base.html`.
- Substitui o bloco `title` com "Login"
- Substitui o bloco `content` com o formul√°rio

---

### üìÑ 3. Template filho: register.html

```html
{% extends "base.html" %}
{% block title %}Cadastro{% endblock %}
{% block content %}
<h2>Cadastro</h2>
<form method="POST" action="/register">
  <input type="text" name="username" placeholder="Usu√°rio">
  <input type="email" name="email" placeholder="Email">
  <input type="password" name="password" placeholder="Senha">
  <button type="submit">Cadastrar</button>
</form>
{% endblock %}
```

- Note que apenas o conte√∫do do formul√°rio de cadastro foi modificado. Todo o restante da p√°gina √© o mesmo (heradado do template base).

---

### ‚úÖ Benef√≠cios da Heran√ßa

- **Evita repeti√ß√£o** de HTML (n√£o precisa repetir `<html>`, `<head>`, CSS, etc.)
- **F√°cil manuten√ß√£o**: mude o layout em um lugar s√≥ (`base.html`)
- **Organiza√ß√£o melhor** do c√≥digo
- Ao utilizarmos as estrutras bloco (`block`),  podemos focar exclusivamente no que precisa ser constru√≠do com base no objetivo da p√°gina

---

# include

Componentes reutiliz√°veis

---

## üîπ O que √© `include`?

- `{% include 'arquivo.html' %}` √© uma **forma de importar um trecho de HTML** de outro arquivo **dentro de um template maior**.
- Serve para **componentizar** e **evitar repeti√ß√£o**, especialmente em partes como:
- mensagens de erro/sucesso
- cabe√ßalhos ou rodap√©s
- formul√°rios reutiliz√°veis
- menus e navbars
- cart√µes, tabelas, blocos informativos

---

## üìÑ Exemplo b√°sico

### Componente: `messages.html`

```html
{% with errors = get_flashed_messages(category_filter=["error"]) %}
{% if errors %}
  {% for msg in errors %}
    <div class="error">{{ msg }}</div>  
  {% endfor %}
{% endif %}
{% endwith %}
```

- Este componente ser√° utilizado para melhorar as mensagens apresentadas durante o uso do formul√°rio de login.

--- 


### Usando em `login.html`

```html
{% extends "base.html" %}
{% block content %}
<h2>Login</h2>

<!-- Inclui mensagens -->
{% include 'components/messages.html' %}

<form method="POST" action="/login">
  <input type="text" name="username" placeholder="Usu√°rio">
  <input type="password" name="password" placeholder="Senha">
  <button type="submit">Entrar</button>
</form>
{% endblock %}
```

- Fazemos a inclus√£o do componente definido em `messages.html` logo ele aparecer√° na p√°gina de acordo com a situa√ß√£o: **sucesso** ou **erro**.

---

### üß† Como funciona?

O **`include` literalmente copia o conte√∫do do arquivo indicado** para dentro da posi√ß√£o onde foi chamado.

> Pense como um *‚Äúcola-e-copia ao renderizar‚Äù*.

### üßæ Vantagens do `include`

| Vantagem        | Explica√ß√£o                                                                |
| --------------- | ------------------------------------------------------------------------- |
| üîÅ Reutiliza√ß√£o | Voc√™ pode usar o mesmo bloco de HTML em v√°rias p√°ginas                    |
| üõ†Ô∏è Organiza√ß√£o | Melhora a legibilidade dos arquivos                                       |
| ‚öôÔ∏è Manuten√ß√£o   | Altera√ß√µes centralizadas (altere um arquivo e todas as p√°ginas atualizam) |

---

## üëÄ Dica avan√ßada

- Voc√™ tamb√©m pode passar vari√°veis para o `include`, se necess√°rio:

```jinja2
{% include "components/messages.html" with context %}
```
- O `with context` (opcional) garante que o include receba as mesmas vari√°veis do template onde est√° sendo chamado.

---

## ‚ùó Diferen√ßa entre `include` e `extends`

| Recurso   | Fun√ß√£o principal                           |
| --------- | ------------------------------------------ |
| `extends` | Herda estrutura completa com blocos        |
| `include` | Insere trechos espec√≠ficos de HTML prontos |